<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><title>ie6png fix tool</title><link href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700|Bitter:400,700,400italic|Open+Sans:300italic,400italic,700italic,400,300,700" media="screen" rel="stylesheet" type="text/css" /><link href="../assets/stylesheets/all-f5ec2720.css" media="screen" rel="stylesheet" type="text/css" /><script src="../assets/javascripts/all-eca7008a.js" type="text/javascript"></script></head><body class="x2008 x2008_ie6png-fix-tool"><div class="navbar navbar-default"><div class="navbar-collapse collapse navbar-responsive-collapse"><div class="container"><ul class="nav navbar-nav"><li><a class="navbar-brand" href="/">Blog</a></li><li><a class="navbar-brand" href="/about.html">About</a></li><li><a class="navbar-brand" href="/projects.html">Projects</a></li><li><a class="navbar-brand" href="/talks.html">Talks</a></li></ul></div></div></div><div class="container"><article class="post"><div class="page-header"><div class="row"><div class="col-md-10"><h1>ie6png fix tool</h1></div><div class="col-md-2 post-date"><time datetime="2008-02-14">Feb 14, 2008</time></div></div></div><div class="alert alert-info">This article is written in Polish and was originally
<a href="http://teamon.jogger.pl/2008/02/14/ie6png-fix-tool">published at Jogger</a>.</div><div class="lead"><p>Skończyłem pisać CSS dla strony. Użyłem dość sporo plików png z przeźroczystością. Szybki test, no tak - IE6 nie obsługuje kanału alpha. Rozwiązanie jest dość proste, osobny arkusz dla IE6 i wykorzystanie jego filtrów</p>
<pre class="highlight css"><span class="nt">selektor</span> <span class="p">{</span>
  <span class="nl">background-image</span><span class="p">:</span> <span class="nb">none</span><span class="p">;</span>
  <span class="nl">filter</span><span class="p">:</span> <span class="n">progid</span><span class="p">:</span><span class="n">DXImageTransform</span><span class="p">.</span><span class="n">Microsoft</span><span class="p">.</span><span class="n">AlphaImageLoader</span><span class="p">(</span><span class="n">src</span><span class="err">=</span><span class="s2">'path/to/image'</span><span class="p">,</span> <span class="n">sizingMethod</span><span class="err">=</span><span class="s2">'crop'</span><span class="p">);</span>
<span class="p">}</span>
</pre>
<p>Na dobra ale tych obrazków trochę jest i średnio mi się chcę ręcznie to zamieniać&hellip;
Rozwiązanie: chwilka z Ruby ;]</p>
<pre class="highlight ruby"><span class="c1">#!/usr/bin/ruby</span>

<span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="no">ARGV</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span>
  <span class="n">style</span> <span class="o">=</span> <span class="s2">""</span>
  <span class="n">f</span><span class="p">.</span><span class="nf">read</span><span class="p">.</span><span class="nf">scan</span><span class="p">(</span><span class="sr">/([^{}]+?)\{[^}]*background(?:-image)?:\s*url\((.*?)\).*?\}/m</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">sel</span><span class="p">,</span> <span class="n">url</span><span class="o">|</span>
    <span class="nb">puts</span> <span class="n">sel</span> <span class="o">+</span> <span class="s2">" "</span> <span class="o">+</span> <span class="n">url</span>
    <span class="n">style</span> <span class="o">&lt;&lt;</span> <span class="s2">"</span><span class="si">#{</span><span class="n">sel</span><span class="si">}</span><span class="s2"> {
  background-image: none;
  filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src=</span><span class="si">#{</span><span class="n">url</span><span class="si">}</span><span class="s2">, sizingMethod='crop');
}"</span>
  <span class="k">end</span>
  <span class="no">File</span><span class="p">.</span><span class="nf">open</span><span class="p">(</span><span class="s2">"style_ie6.css"</span><span class="p">,</span> <span class="s2">"w"</span><span class="p">)</span> <span class="p">{</span> <span class="o">|</span><span class="n">ie</span><span class="o">|</span> <span class="n">ie</span><span class="p">.</span><span class="nf">write</span> <span class="n">style</span> <span class="p">}</span>
<span class="k">end</span>
</pre>
<p>A potem tylko</p>
<pre class="highlight shell">ruby ~/ie6png.rb style.css
</pre>
<p>i mamy gotowy plik <code>style_ie6.png</code>. Nic tylko wrzucić w komentarz warunkowy :)</p>
</div></article><div class="page-header"><h2>Comments</h2></div><div class="alert alert-info">Please comment at the <a href="http://teamon.jogger.pl/2008/02/14/ie6png-fix-tool">original post</a>.</div><ul class="pager"><li class="next"><a href="/2008/instalacja-symfony-na-mac-os-10-5-xampp">Older post →</a></li><li class="previous"><a href="/2008/jak-ulatwic-sobie-zycie-za-pomoca-google-translatora">← Newer post</a></li></ul></div><footer><div class="container"><div class="page-header"></div><div class="row"><div class="col-md-12"><ul class="list-unstyled"><li class="pull-right"><a href="#top">Back to top ↑</a></li><li><a href="/">Blog</a></li><li><a href="/about.html">About</a></li><li><a href="/projects.html">Projects</a></li><li><a href="/talks.html">Talks</a></li><li>|</li><li><a href="http://github.com/teamon">GitHub</a></li><li><a href="http://twitter.com/iteamon">Twitter</a></li><li><a href="http://monterail.com">Monterail</a></li><li><a href="http://codetunes.com">Codetunes</a></li></ul></div></div><div class="row"><div class="col-md-12"><p>Copyright 2007-2014 &mdash; Tymon Tobolski <br />Based on <a href="http://bootswatch.com/lumen/">Lumen Bootswatch</a>. Web fonts from <a href="http://www.google.com/webfonts">Google</a>. </p></div></div></div></footer></body></html>