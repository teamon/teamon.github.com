<!DOCTYPE html><html><head><meta charset="utf-8" /><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible" /><title>Setting up Intel Cluster Compiler with XCode 4</title><link href="http://fonts.googleapis.com/css?family=Droid+Sans:400,700|Bitter:400,700,400italic|Open+Sans:300italic,400italic,700italic,400,300,700" media="screen" rel="stylesheet" type="text/css" /><link href="../assets/stylesheets/all-f5ec2720.css" media="screen" rel="stylesheet" type="text/css" /><script src="../assets/javascripts/all-eca7008a.js" type="text/javascript"></script></head><body class="x2011 x2011_setting-up-intel-cluster-compiler-with-xcode-4"><div class="navbar navbar-default"><div class="navbar-collapse collapse navbar-responsive-collapse"><div class="container"><ul class="nav navbar-nav"><li><a class="navbar-brand" href="/">Blog</a></li><li><a class="navbar-brand" href="/about.html">About</a></li><li><a class="navbar-brand" href="/projects.html">Projects</a></li><li><a class="navbar-brand" href="/talks.html">Talks</a></li></ul></div></div></div><div class="container"><article class="post"><div class="page-header"><div class="row"><div class="col-md-10"><h1>Setting up Intel Cluster Compiler with XCode 4</h1></div><div class="col-md-2 post-date"><time datetime="2011-04-18">Apr 18, 2011</time></div></div></div><div class="alert alert-info">This article was originally
<a href="http://tumblr.teamon.eu/post/4725618392/setting-up-intel-cluster-compiler-with-xcode-4">published at Tumblr</a>.</div><div class="lead"><h3>The easy part</h3>

<p>Download Composer XE for Mac from Intel website, run .dmg, click .pkg, click, click, blah, select XCode integration, click, done.</p>

<p>It will install everything under <code>/opt/intel</code> and &hellip; under <code>/Developer/</code> (no, symlinks, separate install - well, wtf?)</p>

<p>To use icc from command line it is first required to run
<code>bash
source /opt/intel/bin/iccvars.sh intel64
</code></p>

<p>If you use zsh, then you&rsquo;ll have to modify <code>/opt/intel/bin/iccvars.sh</code> file and change all <code>==</code> to <code>=</code>.</p>

<p>Now icc should work from command line. Btw, better add this <code>source ...</code> line to you <code>.bashrc</code>/<code>.zshrc</code> or you&rsquo;ll end up typing that command on every new shell.</p>

<h3>The &ldquo;how to make people frustrated&rdquo; part</h3>

<p>Run XCode, choose new c++ project. In project setting select correct compiler: <img alt="" width="500" height="149" src="../assets/images/blog/setting-up-intel-cluster-compiler-with-xcode-4/select-8a1871ad.png" /></p>

<p>You can try to hit cmd+b and pray it will work. I&rsquo;m not that lucky.</p>

<p>It doesn&rsquo;t work without executing this dumb <code>source ...</code> line. I tried to setup build phases, pre-actions and&hellip; nothing worked. So, here is the hacky way to make it work.</p>
<pre class="highlight shell"><span class="nb">cd</span> /Developer/usr/bin
mv icc icc.orig
touch icc
chmod +x icc
</pre>
<p>Then open new icc file in editor and put there:</p>
<pre class="highlight shell"><span class="c">#!/bin/zsh</span>

<span class="nb">source</span> /opt/intel/bin/iccvars.sh intel64
/Developer/usr/bin/icc.orig <span class="nv">$*</span>
</pre>
<p>Do the same with <code>icpc</code>.</p>

<p>Now license server shit will be loaded when xcode executes <code>/Developer/usr/bin/icc</code></p>

<p>But, that&rsquo;s not everything yet. <code>/Developer/usr/lib</code> is missing some libraries. Just copy what needed from <code>/opt/intel/lib</code> (I needed <code>libimf.a</code>, but it may vary).</p>

<p>After all that hacks it <em>should</em> work&hellip;</p>
</div></article><div class="page-header"><h2>Comments</h2></div><div class="alert alert-info">Please comment at the <a href="http://tumblr.teamon.eu/post/4725618392/setting-up-intel-cluster-compiler-with-xcode-4">original post</a>.</div><ul class="pager"><li class="next"><a href="/2011/scala-combine-several-partial-functions-into-one">Older post →</a></li><li class="previous"><a href="/2011/pow-nginx-configuration">← Newer post</a></li></ul></div><footer><div class="container"><div class="page-header"></div><div class="row"><div class="col-md-12"><ul class="list-unstyled"><li class="pull-right"><a href="#top">Back to top ↑</a></li><li><a href="/">Blog</a></li><li><a href="/about.html">About</a></li><li><a href="/projects.html">Projects</a></li><li><a href="/talks.html">Talks</a></li><li>|</li><li><a href="http://github.com/teamon">GitHub</a></li><li><a href="http://twitter.com/iteamon">Twitter</a></li><li><a href="http://monterail.com">Monterail</a></li><li><a href="http://codetunes.com">Codetunes</a></li></ul></div></div><div class="row"><div class="col-md-12"><p>Copyright 2007-2014 &mdash; Tymon Tobolski <br />Based on <a href="http://bootswatch.com/lumen/">Lumen Bootswatch</a>. Web fonts from <a href="http://www.google.com/webfonts">Google</a>. </p></div></div></div></footer></body></html>